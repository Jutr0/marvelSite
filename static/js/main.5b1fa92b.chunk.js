(this["webpackJsonpmarvel-characters"]=this["webpackJsonpmarvel-characters"]||[]).push([[0],{46:function(e,t,n){},55:function(e,t,n){},63:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var c=n(10),r=n.n(c),a=n(47),s=n.n(a),i=(n(55),n(0)),o=n.n(i),u=n(1),l=n(2),j=n(3),d=n(8),b=n(9),m=n(22),h=n(11),O=n(5),f=function(e){var t=e.comics.map((function(e){return Object(O.jsx)("span",{children:e.name},e.name)}));return Object(O.jsxs)("div",{className:"comicsSection section",children:[Object(O.jsx)("div",{className:"navBar",children:Object(O.jsx)("h1",{children:"COMICS"})}),Object(O.jsx)("div",{className:"comicsList displayList",children:0===t.length?Object(O.jsx)("h1",{children:"Not Found any comics"}):t})]})},p=n(17),x=n(12),v=function(e){return Object(p.a)({id:e.id},e.data())},g=n(28),k=n(49),N=n(30),y=(Object(k.a)({apiKey:"AIzaSyAqe1wm9R99hXRGs121wcWAEixHWkbfClk",authDomain:"marvelgeng-a24d2.firebaseapp.com",projectId:"marvelgeng-a24d2",storageBucket:"marvelgeng-a24d2.appspot.com",messagingSenderId:"1041025244999",appId:"1:1041025244999:web:acaf88fc964f716fef7662"}),new N.a),w=Object(N.b)(),S=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.c)(w,y);case 2:console.log({auth:w});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.d)(w);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=Object(x.f)(),B=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var c,r,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return");case 2:return c=Object(x.d)(I,"users",t.uid),e.next=5,Object(x.e)(c);case 5:if(e.sent.exists){e.next=17;break}return r=t.displayName,a=t.email,s=t.photoURL,i=(new Date).toISOString,e.prev=9,e.next=12,Object(x.j)(c,Object(p.a)({displayName:r,email:a,photoURL:s,createdAt:i},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error("error: ",e.t0);case 17:return e.abrupt("return",L(t.uid));case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,Object(x.e)(Object(x.d)(I,"users",t));case 5:return n=e.sent,e.abrupt("return",Object(p.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,c,r,a,s,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===w.currentUser){e.next=31;break}return e.next=3,w.currentUser.uid;case 3:if((n=e.sent)&&t){e.next=6;break}return e.abrupt("return",null);case 6:return e.prev=6,c=Object(x.d)(I,"comments",t,"userLikes",n),e.next=10,Object(x.e)(c);case 10:return r=e.sent,a=Object(x.d)(I,"comments",t),e.next=14,Object(x.e)(a);case 14:if(s=e.sent,r.exists()){e.next=22;break}return e.next=18,Object(x.j)(Object(x.d)(I,"comments",t,"userLikes",n),{uid:n});case 18:return e.next=20,Object(x.j)(a,{likes:(null===(i=s.data())||void 0===i?void 0:i.likes)+1},{merge:!0});case 20:e.next=26;break;case 22:return e.next=24,Object(x.c)(c);case 24:return e.next=26,Object(x.j)(a,{likes:(null===(u=s.data())||void 0===u?void 0:u.likes)-1},{merge:!0});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(6),console.error(e.t0);case 31:case"end":return e.stop()}}),e,null,[[6,28]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){e.uid;var t=e.description,n=e.displayName,r=e.userImage,a=e.id,s=Object(c.useState)(0),i=Object(h.a)(s,2),o=i[0],u=i[1];return Object(c.useEffect)((function(){var e=Object(g.g)(Object(g.d)(I,"comments",a),(function(e){var t=e.data().likes;u(t)}));return function(){e()}}),[]),Object(O.jsxs)("div",{className:"comment",children:[Object(O.jsxs)("div",{className:"commentUserProfile",children:[Object(O.jsx)("div",{className:"commentImg",style:{backgroundImage:"url(".concat(r||"https://via.placeholder.com/150",")"),backgroundColor:"white"}}),Object(O.jsx)("span",{children:n})]}),Object(O.jsx)("span",{className:"commentText",children:t}),Object(O.jsxs)("div",{className:"commentBtns",children:[Object(O.jsx)("span",{children:o||"0"}),Object(O.jsx)("button",{onClick:function(){return A(a)},children:"\ud83d\udc97"}),Object(O.jsx)("button",{children:"\ud83d\udcac"})]}),Object(O.jsx)("div",{className:"titanic"})]})},D=function(e){var t=Object(c.useState)(""),n=Object(h.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(null),i=Object(h.a)(s,2),l=i[0],j=i[1];Object(c.useEffect)((function(){var t=Object(x.i)(Object(x.b)(I,"comments"),Object(x.h)("createdAt","desc"),Object(x.k)("character","==",+e.id)),n=Object(x.g)(t,(function(e){var t=e.docs.map(v).map((function(e){return Object(O.jsx)(U,Object(p.a)({},e),e.id)}));j(t)}));return function(){n()}}),[]);var d=function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===w.currentUser){t.next=7;break}return n=r,a(""),t.next=6,Object(x.a)(Object(x.b)(I,"comments"),{description:n,uid:w.currentUser.uid,displayName:w.currentUser.displayName,likes:0,comments:0,userImage:w.currentUser.photoURL,createdAt:(new Date).toISOString(),character:+e.id});case 6:t.sent;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error adding document: ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"commentsSection section",children:[Object(O.jsx)("div",{className:"navBar",children:Object(O.jsx)("h1",{children:"comments"})}),Object(O.jsxs)("div",{className:"addCommentContainer",children:[Object(O.jsx)("div",{className:"addCommentImg",style:{backgroundImage:"url(".concat(null!==w.currentUser?w.currentUser.photoURL:"https://via.placeholder.com/150",")"),backgroundColor:"white"}}),Object(O.jsxs)("form",{children:[Object(O.jsx)("textarea",{className:"addCommentTextarea",maxLength:100,value:r,rows:1,placeholder:"Add Public Comment...",onChange:function(e){return a(e.target.value)},onBlur:function(e){return a(e.target.value)}}),Object(O.jsx)("button",{className:"addCommentBtn",onClick:function(e){e.preventDefault(),d()},children:"Comment"})]})]}),Object(O.jsx)("div",{className:"comments",children:l})]})},E=function(e){var t=e.events.map((function(e){return Object(O.jsx)("span",{children:e.name})}));return Object(O.jsxs)("div",{className:"eventsSection section",children:[Object(O.jsx)("div",{className:"navBar",children:Object(O.jsx)("h1",{children:"events"})}),Object(O.jsx)("div",{className:"eventsList displayList",children:0===t.length?Object(O.jsx)("h1",{children:"Not Found any events"}):t})]})},F=function(e){var t=e.stories.map((function(e){return Object(O.jsx)("span",{children:e.name},e.name)}));return Object(O.jsxs)("div",{className:"storiesSection section",children:[Object(O.jsx)("div",{className:"navBar",children:Object(O.jsx)("h1",{children:"stories"})}),Object(O.jsx)("div",{className:"storiesList displayList",children:0===t.length?Object(O.jsx)("h1",{children:"Not Found any stories"}):t})]})},M=(n(63),n(37)),R=function(e){var t=Object(c.useState)(null),n=Object(h.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!0),i=Object(h.a)(s,2),o=i[0],u=i[1];if(Object(c.useEffect)((function(){M.get("https://gateway.marvel.com/v1/public/characters/".concat(e.detailsId),{params:{ts:e.params.ts,apikey:e.params.apikey,hash:e.params.hash}}).then((function(e){a(e.data.data.results[0])})).catch((function(e){console.log(e),console.log("detailsError")})).then((function(){u(!1)}))}),[]),o)return Object(O.jsx)("h1",{children:"Loading..."});if(null===r)return Object(O.jsx)("h1",{children:"Not Found"});var l=r.name,j=r.thumbnail,d=r.comics,b=r.description,m=r.events,p=r.stories;return Object(O.jsxs)("div",{id:"container",children:[Object(O.jsxs)("div",{className:"deciption",children:[Object(O.jsx)("img",{src:"".concat(j.path,".").concat(j.extension),alt:l}),Object(O.jsxs)("div",{className:"detailsDescription",children:[Object(O.jsx)("h1",{children:l}),Object(O.jsx)("br",{}),Object(O.jsx)("hr",{}),Object(O.jsx)("br",{}),b]})]}),Object(O.jsx)(f,{comics:d.items}),Object(O.jsx)(F,{stories:p.items}),Object(O.jsx)(E,{events:m.items}),void 0!==e.detailsId?Object(O.jsx)(D,{id:e.detailsId}):null]})},W=(n(46),function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.thumbnail,c=e.id,r='url("'.concat(n.path,".").concat(n.extension,'")');return Object(O.jsxs)(m.a,{to:"/details/".concat(c),className:"result",children:[Object(O.jsx)("div",{className:"resultImg",style:{backgroundImage:r}}),Object(O.jsx)("span",{className:"resultName",children:t})]})}}]),n}(c.Component)),H=function(e,t,n){var r=Object(c.useState)(t),a=Object(h.a)(r,2),s=a[0],i=a[1],o="use-dropdown-".concat(e.replace(" ","").toLowerCase());return[s,function(){return Object(O.jsxs)("label",{htmlFor:o,id:o+"-label",children:[e,Object(O.jsx)("select",{id:o,value:s,onChange:function(e){return i(e.target.value)},onBlur:function(e){return i(e.target.value)},disabled:!n.length,children:n.map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})]})},i]},J=n(37),P=function(e){var t,n=Object(c.useState)(e.params),r=Object(h.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(null),o=Object(h.a)(i,2),u=o[0],l=o[1],j=Object(c.useState)([]),d=Object(h.a)(j,2),b=d[0],m=d[1],f=Object(c.useState)(""),x=Object(h.a)(f,2),v=x[0],g=x[1],k=H("Order By ","Name Ascending",["Name Ascending","Name Descending","Modified Ascending","Modified Descending"]),N=Object(h.a)(k,2),y=N[0],w=N[1],S=Object(c.useState)([]),C=Object(h.a)(S,2),I=C[0],B=C[1],L=H("Page ","1",I),A=Object(h.a)(L,3),U=A[0],D=A[1],E=A[2],F=Object(c.useRef)(!0);return Object(c.useEffect)((function(){F.current=!0,m(null),J.get("http://gateway.marvel.com/v1/public/characters",{params:a}).then((function(e){console.log(e),l(e),m(e.data.data.results),console.log("response")})).catch((function(e){console.log(e),console.log("error")}))}),[a]),Object(c.useEffect)((function(){E("1")}),[a.nameStartsWith]),Object(c.useEffect)((function(){var e;switch(y){case"Name Descending":e="-name";break;case"Modified Ascending":e="modified";break;case"Modified Descending":e="-modified";break;default:e="name"}s(Object(p.a)(Object(p.a)({},a),{orderBy:e}))}),[y]),Object(c.useEffect)((function(){if(F.current=!0,null!==u){var e=u.data.data.total,t=Math.floor(e/a.limit);t*a.limit<e&&(t+=1);for(var n=Array(t),c=1;c<=t;c++)n[c-1]=c.toString();B(n)}}),[u,a.limit]),Object(c.useEffect)((function(){F.current=!0;var e=(Number(U)-1)*a.limit;s(Object(p.a)(Object(p.a)({},a),{offset:e}))}),[U]),null!==b&&b.length>0?(F.current=!1,t=b.map((function(e){return Object(O.jsx)(W,{name:e.name,description:e.description,thumbnail:e.thumbnail,id:e.id},e.id)}))):null!==b&&0===b.length&&(F.current=!1,t=Object(O.jsx)("h1",{children:"Not Found"})),!0===F.current&&(t=Object(O.jsx)("h1",{children:"Loading..."})),Object(O.jsxs)("div",{id:"container",children:[Object(O.jsx)("div",{className:"searchBar",children:Object(O.jsxs)("form",{children:[Object(O.jsx)(D,{}),Object(O.jsxs)("label",{htmlFor:"name",children:["Name",Object(O.jsx)("input",{id:"name",placeholder:"Name",value:v,onChange:function(e){e.preventDefault(),g(e.target.value)},onBlur:function(e){e.preventDefault(),g(e.target.value)}})]}),Object(O.jsx)(w,{}),Object(O.jsx)("button",{id:"searchButton",value:"Search",onClick:function(e){if(e.preventDefault(),a.nameStartsWith===v||void 0===a.nameStartsWith&&(null===v||""===v.trim()));else if(null===v||""===v.trim()){var t=a;delete t.nameStartsWith,s(Object(p.a)({},t))}else s(Object(p.a)(Object(p.a)({},a),{nameStartsWith:v}))},children:"Search"})]})}),Object(O.jsx)("div",{className:"results",children:t})]})},T=function(e){return Object(O.jsx)("h1",{children:"I know nothing John Snow"})},G=function(){return Object(O.jsx)(m.a,{to:"/login",children:Object(O.jsx)("h2",{children:"Log In"})})},q=function(e){return Object(O.jsx)("button",{onClick:S,children:"Log in via Google"})},z=function(){return Object(O.jsx)(m.a,{to:"/",children:Object(O.jsx)("h2",{children:"Register"})})},K=function(){return Object(O.jsx)(m.a,{to:"/",children:Object(O.jsx)("h2",{onClick:C,children:"Log Out"})})},X=function(e){var t=e.user;if(e.loading)return null;var n=t?Object(O.jsx)(K,{}):[Object(O.jsx)(G,{},"login"),Object(O.jsx)(z,{},"register")];return Object(O.jsx)("div",{className:"authenticationButtons",children:n})},Q={ts:1,apikey:"0496dd1c25a6148054d36d77a65cfe14",hash:"1bc050ca4051e97e6e076c02cd39b807",limit:20,offset:0,orderBy:"name"},V=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={user:null,loading:!0},e.unsubscribeFromAuth=null,e.componentDidMount=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.unsubscribeFromAuth=w.onAuthStateChanged(function(){var t=Object(u.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(n);case 2:c=t.sent,e.setState({user:c,loading:!1}),console.log("app user: ",{user:c});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e.componentWillUnmount=function(){null!==e.unsubscribeFromAuth&&e.unsubscribeFromAuth()},e}return Object(j.a)(n,[{key:"render",value:function(){return[Object(O.jsxs)("div",{className:"navBarMain",children:[Object(O.jsx)(m.a,{to:"/",children:Object(O.jsx)("h1",{id:"homeButton",children:"HOME"})},"linkToHome"),Object(O.jsx)(X,{user:this.state.user,loading:this.state.loading})]}),Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(m.b,{children:[Object(O.jsx)(T,{default:!0}),Object(O.jsx)(q,{path:"/login"}),Object(O.jsx)(P,{path:"/",params:Q}),Object(O.jsx)(R,{path:"/details/:detailsId",params:Q})]})},"container")]}}]),n}(c.Component);s.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(V,{})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.5b1fa92b.chunk.js.map